function FormValidator(e,t){var n=this;this.validation_patterns=typeof t==="undefined"?[{name:"mustselect",regex:/^.+$/,error:"You must make a selection"},{name:"notempty",regex:/^(?=\s*\S).*$/,error:"Field cannot be left empty"},{name:"needemail",regex:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,error:"Not a valid email address"},{name:"needphonenum",regex:/^\+?[0-9\s\(\)]+$/,error:"Not a valid phone number"},{name:"needpostcode",regex:/^[A-Za-z]{1,2}[0-9]{1,2}\s?[0-9]{1}[a-zA-Z]{2}$/,error:"Not a valid UK postcode"}]:t;this.form=typeof e==="undefined"?jQuery("form"):e;this.submitText=this.form.find("input[type=submit]").attr("value")?this.form.find("input[type=submit]").attr("value"):this.form.find("button[type=submit]").text();this.fields=this.form.find("input, textarea, select");this.validationErrors=new Array;this.validate_fields=function(){this.fields.each(function(e){element=jQuery(this);if(element.attr("class")){classList=element.attr("class").split(/\s+/);classList.forEach(function(t){n.validate_field(element,e)})}})};this.validate_field=function(e,t){if(e.parents(":hidden").length>0)return;if(e.attr("class")){classList=e.attr("class").split(/\s+/);classList.forEach(function(r){value=e.val();n.validation_patterns.forEach(function(i,s,o){if(i.name==r){if(i.regex.test(value)){delete n.validationErrors[t];e.siblings(".formerror").remove()}else{e.siblings(".formerror").remove();n.validationErrors[t]=i.error;jQuery('<p class="formerror">'+i.error+"</p>").insertAfter(e)}}})})}};this.recount_errors=function(){var e=0;for(var t=0;t<this.validationErrors.length;t++){if(this.validationErrors[t]){e++}}if(e>0){this.form.find("input[type=submit]").attr("disabled","disabled");this.form.find("button[type=submit]").attr("disabled","disabled");this.form.find("input[type=submit]").attr("value",this.submitText+" (Disabled - check for errors)");this.form.find("button[type=submit]").text(this.submitText+" (Disabled - check for errors)")}else{this.form.find("input[type=submit]").removeAttr("disabled");this.form.find("button[type=submit]").removeAttr("disabled");this.form.find("button[type=submit]").text(this.submitText);this.form.find("input[type=submit]").attr("value",this.submitText)}return e};this.fieldsize=function(){var e=0;this.fields.forEach(function(){e++});return e};this.fields.each(function(e){switch(jQuery(this).prop("tagName").toLowerCase()){case"input":case"textarea":jQuery(this).focusout(function(){n.validate_field(jQuery(this),e);n.recount_errors()});jQuery(this).keyup(function(t){var r=t.keyCode||t.which;if(r!="9"){n.validate_field(jQuery(this),e);n.recount_errors()}});break;case"select":jQuery(this).focusout(function(){n.validate_field(jQuery(this),e);n.recount_errors()});jQuery(this).change(function(){n.validate_field(jQuery(this),e);n.recount_errors()});break}});this.validationErrors.firstErrorIndex=function(){var e=0;for(var t=0;t<n.validationErrors.length;t++){if(n.validationErrors[t]){console.log(t);return t}}return false};this.form.submit(function(e){n.validate_fields();if(n.recount_errors()>0){e.preventDefault()}})}var validator=new FormValidator